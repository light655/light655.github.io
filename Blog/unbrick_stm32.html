<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#">
<head>
  <meta charset="UTF-8" />
  <title>How to un-brick an STM32? | light655</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="/static/m-dark.css" />
  <link rel="canonical" href="/Blog/unbrick_stm32.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#cb4b16" />
  <meta property="og:site_name" content="light655" />
  <meta property="og:title" content="How to un-brick an STM32?" />
  <meta name="twitter:title" content="How to un-brick an STM32?" />
  <meta property="og:url" content="/Blog/unbrick_stm32.html" />
  <meta property="og:description" content="I accidentally bricked my STM32 when uploading compiled binaries to it. I used a Raspberry Pi Pico 2 and the official CMSIS-DAP firmware with OpenOCD. After some messing around, I found the way to un-brick it and how to prevent bricking." />
  <meta name="twitter:description" content="I accidentally bricked my STM32 when uploading compiled binaries to it. I used a Raspberry Pi Pico 2 and the official CMSIS-DAP firmware with OpenOCD. After some messing around, I found the way to un-brick it and how to prevent bricking." />
  <meta name="twitter:card" content="summary" />
  <meta property="og:type" content="article" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a href="/" id="m-navbar-brand" class="m-col-t-9 m-col-m-none m-left-m">light655</a>
      <a id="m-navbar-show" href="#navigation" title="Show navigation" class="m-col-t-3 m-hide-m m-text-right"></a>
      <a id="m-navbar-hide" href="#" title="Hide navigation" class="m-col-t-3 m-hide-m m-text-right"></a>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="/blab.html">Blab</a></li>
            <li><a href="/Blog/">Blog</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="3">
            <li><a href="/docs/">Documentation</a></li>
            <li><a href="/Product/">Product</a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main>
<div class="m-container">
  <div class="m-row">
    <article class="m-col-m-10 m-nopadb">
      <header>
        <h1><a href="/Blog/unbrick_stm32.html" rel="bookmark" title="Permalink to How to un-brick an STM32?">
          <time class="m-date" datetime="2026-02-10T00:00:00+08:00">
            Feb <span class="m-date-day">10</span> 2026
          </time>
          How to un-brick an STM32?
        </a></h1>
        <p>I accidentally bricked my STM32 when uploading compiled binaries to it.
        I used a Raspberry Pi Pico 2 and the official CMSIS-DAP firmware with OpenOCD.
        After some messing around, I found the way to un-brick it and how to prevent bricking.</p>
      </header>
      <div class="m-clearfix-l"></div>
<!-- content -->
<figure class="m-figure">
<img src="/data/unbrick_stm32/error.webp" />
<figcaption>Error message when uploading code to the bricked STM32.</figcaption>
</figure>
<section id="why-was-it-bricked">
<h2>Why was it bricked?</h2>
<p>I was too eager to get my code up and running on the STM32, so I only did minimal configuration in STM32 Cube MX.
I'll us a simplified project to demostrate, blinky.
Let's say we want to blink the LED on PC13.
To finish setting up as soon as possible, we only changed the GPIO setting of PC13 in Cube MX.
All other pins have the default value as generated by Cube MX.</p>
<figure class="m-figure">
<img src="/data/unbrick_stm32/bare.webp" />
<figcaption>Cube MX setting with only PC13 changed to GPIO output by us.</figcaption>
</figure>
<p>After compiling and uploading the binaries to the STM32, we want to change something in the code.
However, we are met with an error message when uploading to the STM32.
This is because we forgot to enable the Serial Wire Debug (SWD) interface in Cube MX.
Since we are uploading through this interface, without it enabled, the STM32 will seem &quot;bricked&quot;.</p>
</section>
<section id="un-bricking-procedure">
<h2>Un-bricking procedure</h2>
<img class="m-image" src="/data/unbrick_stm32/boot0.webp" />
<p>Connect BOOT0 to VDD, power up the STM32 and press the reset button, the STM32 will start in bootloader mode.
Then, use SWD to upload your code.
The uploading process will be successful.</p>
<img class="m-image" src="/data/unbrick_stm32/no_error.webp" />
<aside class="m-note m-info">
<p>However, there are two important things to note:</p>
<ul>
<li>Remember to move the BOOT0 jumper back to 0, or the STM32 won't start running our code.</li>
<li>If we didn't change the settings (shown in the next section), the STM32 will appear to be bricked on the next upload.</li>
</ul>
</aside>
</section>
<section id="how-to-prevent-this">
<h2>How to prevent this?</h2>
<p>When setting up the STM32 in Cube MX, remember to enable SWD.
Go to System Core &gt; SYS on the left hand side menu and enable Serial Wire as the debugging interface.
After this is set, PA13 and PA14 should be coloured in green.
This is because these two pins are the SWD interface on the STM32F103.</p>
<img class="m-image" src="/data/unbrick_stm32/enable_swd.webp" />
<figure class="m-figure">
<img src="/data/unbrick_stm32/enabled.webp" />
<figcaption>Cube MX setting with SWD interface enabled.</figcaption>
</figure>
<p>With the correct SWD interface settings, we will be able to upload binaries to the STM32 normally again.</p>
</section>
<!-- /content -->
      <footer>
        <p>Posted by <a href="/author/liang-yu-chen.html">Liang-Yu Chen</a> on <time datetime="2026-02-10T00:00:00+08:00">Tue 10 February 2026</time> in <a href="/Blog/">Blog</a>. <span class="m-label m-success">updated <time datetime="2026-02-10T00:00:00+08:00">Tue 10 February 2026</time></span> Tags: <a href="/tag/stm32.html">STM32</a>, <a href="/tag/swd.html">SWD</a>, <a href="/tag/openocd.html">OpenOCD</a>.</p>
      </footer>
    </article>
<!--     <nav class="m-navpanel m-col-m-2">
      <h3>Categories</h3>
      <ol class="m-block-bar-m">
        <li><a href="/Blog/">Blog</a></li>
        <li><a href="/Product/">Product</a></li>
      </ol>
      <h3>Tag cloud</h3>
      <ul class="m-tagcloud">
        <li class="m-tag-2"><a href="/tag/8-bit.html">8-bit</a></li>
        <li class="m-tag-2"><a href="/tag/adc.html">ADC</a></li>
        <li class="m-tag-2"><a href="/tag/ads1115.html">ADS1115</a></li>
        <li class="m-tag-3"><a href="/tag/arduino.html">Arduino</a></li>
        <li class="m-tag-5"><a href="/tag/breadboard.html">Breadboard</a></li>
        <li class="m-tag-2"><a href="/tag/display.html">Display</a></li>
        <li class="m-tag-2"><a href="/tag/drv8825.html">DRV8825</a></li>
        <li class="m-tag-2"><a href="/tag/efuse.html">eFuse</a></li>
        <li class="m-tag-2"><a href="/tag/flash.html">Flash</a></li>
        <li class="m-tag-2"><a href="/tag/fpga.html">FPGA</a></li>
        <li class="m-tag-2"><a href="/tag/hall-effect.html">Hall Effect</a></li>
        <li class="m-tag-2"><a href="/tag/hexadecimal.html">Hexadecimal</a></li>
        <li class="m-tag-2"><a href="/tag/kicad.html">Kicad</a></li>
        <li class="m-tag-2"><a href="/tag/openocd.html">OpenOCD</a></li>
        <li class="m-tag-2"><a href="/tag/overcurrent-protection.html">Overcurrent Protection</a></li>
        <li class="m-tag-2"><a href="/tag/pmod.html">PMOD</a></li>
        <li class="m-tag-2"><a href="/tag/power-supply.html">Power Supply</a></li>
        <li class="m-tag-2"><a href="/tag/raspberry-pi-pico.html">Raspberry Pi Pico</a></li>
        <li class="m-tag-2"><a href="/tag/register.html">Register</a></li>
        <li class="m-tag-2"><a href="/tag/rp2040.html">RP2040</a></li>
        <li class="m-tag-2"><a href="/tag/rp2350.html">RP2350</a></li>
        <li class="m-tag-2"><a href="/tag/sensor.html">Sensor</a></li>
        <li class="m-tag-2"><a href="/tag/serial-wire-debug.html">Serial Wire Debug</a></li>
        <li class="m-tag-2"><a href="/tag/simulation.html">Simulation</a></li>
        <li class="m-tag-2"><a href="/tag/spice.html">SPICE</a></li>
        <li class="m-tag-2"><a href="/tag/st7735.html">ST7735</a></li>
        <li class="m-tag-2"><a href="/tag/stepper-motor.html">Stepper Motor</a></li>
        <li class="m-tag-4"><a href="/tag/stm32.html">STM32</a></li>
        <li class="m-tag-2"><a href="/tag/swd.html">SWD</a></li>
        <li class="m-tag-2"><a href="/tag/timer.html">Timer</a></li>
        <li class="m-tag-2"><a href="/tag/tmag5170.html">TMAG5170</a></li>
      </ul>
    </nav>
  </div>
</div>
 -->
</main>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>light655. Powered by <a href="https://getpelican.com">Pelican</a> and <a href="https://mcss.mosra.cz">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>